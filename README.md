<p align="center">
  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
  <h1>ë°°ë‹¬ ì„œë¹„ìŠ¤ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ (Delivery App MSA)</h1>
</p>

ì•ˆë…•í•˜ì„¸ìš”! ì´ í”„ë¡œì íŠ¸ëŠ” **NestJS**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ëœ **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜(MSA) ë°°ë‹¬ ì• í”Œë¦¬ì¼€ì´ì…˜**ì…ë‹ˆë‹¤.  
ëª¨ë…¸ë ˆí¬(Monorepo) êµ¬ì¡°ë¥¼ ì±„íƒí•˜ì—¬ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ì™€ ê³µí†µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ìˆìœ¼ë©°, ì‹¤ì œ ë°°ë‹¬ ì„œë¹„ìŠ¤ì˜ í•µì‹¬ ê¸°ëŠ¥ë“¤ì„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì—¬ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

ë‚¨ë“¤ì´ ë´ë„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë„ë¡ í”„ë¡œì íŠ¸ êµ¬ì¡°ì™€ ì‹¤í–‰ ë°©ë²•ì„ ì •ë¦¬í•´ ë‘ì—ˆìŠµë‹ˆë‹¤. ğŸ˜Š

---

## ğŸ—ï¸ í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ ë° êµ¬ì¡°

ì´ í”„ë¡œì íŠ¸ëŠ” **pnpm** ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” **NestJS Monorepo**ì…ë‹ˆë‹¤.  
ê° ê¸°ëŠ¥ì€ ë…ë¦½ì ì¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ë‚˜ë‰˜ì–´ ìˆìœ¼ë©°, **Docker**ë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡° (Directory Structure)

í”„ë¡œì íŠ¸ì˜ ì „ì²´ì ì¸ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```
delivery/
â”œâ”€â”€ apps/                   # ê°œë³„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ (Microservices)
â”‚   â”œâ”€â”€ gateway/            # API Gateway (Port: 3000) - ì™¸ë¶€ ìš”ì²­ ì§„ì…ì 
â”‚   â”œâ”€â”€ user/               # ì‚¬ìš©ì ê´€ë¦¬ ì„œë¹„ìŠ¤ (DB: Postgres)
â”‚   â”œâ”€â”€ product/            # ìƒí’ˆ ê´€ë¦¬ ì„œë¹„ìŠ¤ (DB: Postgres)
â”‚   â”œâ”€â”€ order/              # ì£¼ë¬¸ ê´€ë¦¬ ì„œë¹„ìŠ¤ (DB: Mongo)
â”‚   â”œâ”€â”€ payment/            # ê²°ì œ ê´€ë¦¬ ì„œë¹„ìŠ¤ (DB: Postgres, Mongo)
â”‚   â””â”€â”€ notification/       # ì•Œë¦¼ ì„œë¹„ìŠ¤ (DB: Mongo)
â”œâ”€â”€ libs/                   # ê³µí†µ ë¼ì´ë¸ŒëŸ¬ë¦¬ (Shared Libraries)
â”‚   â””â”€â”€ common/             # ëª¨ë“  ì•±ì—ì„œ ê³µìœ í•˜ëŠ” ëª¨ë“ˆ (DTO, DB, Auth, Git)
â”œâ”€â”€ docker-compose.yml      # ë¡œì»¬ ê°œë°œ í™˜ê²½ ì‹¤í–‰ì„ ìœ„í•œ Docker êµ¬ì„± íŒŒì¼
â”œâ”€â”€ nest-cli.json           # NestJS Monorepo ì„¤ì • íŒŒì¼
â”œâ”€â”€ package.json            # í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸ ê´€ë¦¬
â””â”€â”€ pnpm-lock.yaml          # íŒ¨í‚¤ì§€ ë²„ì „ ì ê¸ˆ íŒŒì¼
```

#### `apps/` (ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìƒì„¸)
ê° ì„œë¹„ìŠ¤ëŠ” ë…ë¦½ì ì¸ **NestJS ì• í”Œë¦¬ì¼€ì´ì…˜**ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ë„ì»¤ ì»¨í…Œì´ë„ˆë¡œ ê°œë³„ ì‹¤í–‰ë©ë‹ˆë‹¤.

| ì„œë¹„ìŠ¤ëª… | í¬íŠ¸ | ë°ì´í„°ë² ì´ìŠ¤ | ì£¼ìš” ì—­í•  |
| :--- | :--- | :--- | :--- |
| **Gateway** | 3000 | - | í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ë¼ìš°íŒ…, ì¸ì¦(Authentication) ìœ„ì„ |
| **User** | - | PostgreSQL | íšŒì›ê°€ì…, ë¡œê·¸ì¸, ìœ ì € ì •ë³´ ê´€ë¦¬ (TCP í†µì‹ ) |
| **Product** | - | PostgreSQL | ìƒí’ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ, ì¬ê³  ê´€ë¦¬ |
| **Order** | - | MongoDB | ì£¼ë¬¸ ìƒì„±, ìƒíƒœ ë³€ê²½, ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ |
| **Payment** | - | Postgres, Mongo | ê²°ì œ ìŠ¹ì¸/ì·¨ì†Œ, ê²°ì œ ë‚´ì—­ ê´€ë¦¬ (CQRS íŒ¨í„´ ê³ ë ¤) |
| **Notification** | - | MongoDB | ì´ë©”ì¼/Push ì•Œë¦¼ ì „ì†¡, ì•Œë¦¼ ê¸°ë¡ ì €ì¥ |

> **ì°¸ê³ **: Gatewayë¥¼ ì œì™¸í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë“¤ì€ ì™¸ë¶€ë¡œ í¬íŠ¸ë¥¼ ë…¸ì¶œí•˜ì§€ ì•Šê³ , **TCP** ë˜ëŠ” **Message Queue**ë¥¼ í†µí•´ ë‚´ë¶€ í†µì‹ ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. (Docker Network ë‚´ë¶€ í†µì‹ )

#### `libs/` (ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬)
ì¤‘ë³µ ì½”ë“œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ê³µí†µ ê¸°ëŠ¥ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤.
- **`common`**:
  - `database`: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ëª¨ë“ˆ (AbstractMongoose, AbstractTypeOrm ë“±)
  - `auth`: JWT ì¸ì¦ ê°€ë“œ ë° ì „ëµ (Strategies)
  - `rmq`: RabbitMQ ë©”ì‹œì§€ í í†µì‹  ëª¨ë“ˆ (í•„ìš” ì‹œ)
  - `logger`: ê³µí†µ ë¡œê¹… ëª¨ë“ˆ


---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

- **Framework**: [NestJS](https://nestjs.com/) (Node.js)
- **Language**: TypeScript
- **Package Manager**: [pnpm](https://pnpm.io/)
- **Database**: 
  - PostgreSQL (User, Product, Payment)
  - MongoDB (Order, Payment, Notification)
- **Infrastructure**: Docker, Docker Compose

---

## ğŸš€ ì‹œì‘í•˜ê¸° (Getting Started)

ë¡œì»¬ í™˜ê²½ì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

### 1. ì‚¬ì „ ì¤€ë¹„ (Prerequisites)
- Node.js ì„¤ì¹˜
- pnpm ì„¤ì¹˜ (`npm install -g pnpm`)
- Docker ë° Docker Compose ì„¤ì¹˜

### 2. ì˜ì¡´ì„± ì„¤ì¹˜ (Install Dependencies)
í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ëª¨ë“  ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
$ pnpm install
```
### 3. ë¡œì»¬ í™˜ê²½ ì‹¤í–‰ (Run Locally)
Docker Composeë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ì„œë¹„ìŠ¤ì™€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í•œ ë²ˆì— ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
$ docker-compose up --build
```
ì´ ëª…ë ¹ì–´ëŠ” í•„ìš”í•œ DB ì»¨í…Œì´ë„ˆ(Postgres, Mongo)ì™€ ê° ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.

ê° ì„œë¹„ìŠ¤ë¥¼ ê°œë³„ì ìœ¼ë¡œ ê°œë°œ ëª¨ë“œë¡œ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´:
```bash
# Gateway ì„œë¹„ìŠ¤ ì‹¤í–‰ ì˜ˆì‹œ
$ pnpm start:dev gateway

# User ì„œë¹„ìŠ¤ ì‹¤í–‰ ì˜ˆì‹œ
$ pnpm start:dev user
```

---

## ğŸ“ ì°¸ê³  ì‚¬í•­

- `payment-command`ì™€ `payment-query` í´ë”ëŠ” CQRS íŒ¨í„´ ì ìš©ì„ ìœ„í•œ êµ¬ì¡°ë¡œ ë³´ì´ë‚˜, í˜„ì¬ ë©”ì¸ ì„¤ì •(`nest-cli.json`)ì—ëŠ” `payment` ë‹¨ì¼ ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- ê°œë°œ ì¤‘ ê¶ê¸ˆí•œ ì ì´ë‚˜ ì´ìŠˆê°€ ìˆë‹¤ë©´ ì–¸ì œë“  ê³µìœ í•´ ì£¼ì„¸ìš”!
